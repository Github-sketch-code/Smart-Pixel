<html>
	<head>
		<link rel="stylesheet" href="navstyle.css"/>
    	<link rel="icon" type="image/png" href="fav.png" size="32x32"/>
    	<title>Light is Power</title>

		<div id="menuToggle">
			<!--
			 Eine Checkbock als Click empfaenger fuer den Menu Button
			-->
			<input type="checkbox" />
			<!--
			 Ein paar Spans fur das Menu
			-->
			<span></span>
			<span></span>
			<span></span>
			<!--
			Menu "in" der Checkbox
			-->
			<ul id="menu">
			  <a href="#"><li>Home</li></a>    <!--Hier soll sich Temperatur/Luftfeuchte der RGB Regler : EINE SCHLICHTE SEITE befinden-->
			  <a href="#"><li>Reminder</li></a>
			  <a href="#"><li>Switches</li></a>
			  <a href="#"><li>About</li></a>
			  <a href="#" target="_blank"><li>Support</li></a>
			</ul>
		</div>
	
		<h1 style="text-align: center; color:rgb(180, 118, 118)">Micro Rainbow</h1>
		<hr>
		<p id="MidText">
		  Temperature & Humidity
		  <br/>
		  Color Mixer
		</p>

		<hr>
	</head>
	<!-- https://code-boxx.com/submit-form-without-refreshing-page/ -->
	<script>
		// WebSocket-Initialization
			var connection = new WebSocket("ws://" + location.hostname + ":81/", ["arduino"]);
			connection.onopen = function() { connection.send("Connect " + new Date()); }
			connection.onerror = function (error) { console.log("WebSocket Error ", error); }
			connection.onmessage = function (e) { console.log("Server: ", e.data()); }
			connection.onclose = function () { console.log('WebSocket connection closed'); };
		// WebSocket-Initialization

		function websocketSend(argName, arg) {
			var sendString = argName + ":" + arg;
			console.log(sendString);
			connection.send(sendString);
		}

		function sendRelay() {
			var relays = document.getElementsByClassName("Relay");
			for(var relayToChange of relays) {
			}
			var relayNum = 0;
			websocketSend("Relay", "");
		}
		function sendPirSensor() {
			websocketSend("PirSensorReset", "1");
		}
		function sendRGB() {
			var rgb = document.getElementById("RGB-Color").value;
			//alert(rgb)
			//console.log("RGB: " + rgb);
			//connection.send(rgb);
			websocketSend("RGB-Color", rgb);
		}
		function sendEffekte() {
			// https://www.techiedelight.com/get-value-of-selected-radio-button-javascript/ - 2. JavaScript
			var radios = document.getElementsByClassName("Effekte");
			for (var checked_radio of radios) {
				if(checked_radio.checked) {
					//alert(checked_radio.value);
					websocketSend("Effekt", checked_radio.value);
				}
			}
			var effektSpeed = document.getElementById("EffektSpeed").value;
			websocketSend("EffektSpeed", effektSpeed);
			//alert(effekt);
			//connection.send("Effekt:" + checked_radio.value);
			//connection.send("EffektSpeed:" + effektSpeed.value);
		}
	</script>
	<body>
		<h2>RGB</h2>
		<form method="POST" oninput="sendRGB();">
			Farbe<input id="RGB-Color" type="color" name="RGB-Color"/>
		</form>
		<hr/>
		<h2>Effekte</h2>
		<form method="POST" oninput="sendEffekte();">
			<input type="radio" class="Effekte" name="Effekt" value="Blink"/>Blink
			<br/>
			<input type="radio" class="Effekte" name="Effekt" value="RainbowCycle"/>Rainbow-Cycle
			<br/>
			<input type="radio" class="Effekte" name="Effekt" value="Color-Wipe"/>Color-Wipe
			<br/>
			<input type="radio" class="Effekte" name="Effekt" value="Nothing"/>Nothing
			<br/>
			Effekt-Speed<input id="EffektSpeed" name="EffektSpeed" type="range" min="1" max="100">
			<br/>
			<input type="submit" value="Abschicken">
		</form>
		<hr/>
		<h2>Relay</h2>
		<form method="POST" onclick="sendRGB();">
			<input type="submit" class="Relay" name="Relay0" value="Relay">
		</form>
		<hr/>
		<h2>Pir-Sensor</h2>
		<form method="POST" onclick="sendPirSensor();">
			<p style="height: 5em; width: 5em; background-color:red; border-radius: 0.7em;"></p>
			<input type="button" name="resetPir" name="Reset" value="Reset">
		</form>
		<hr/>
		<h2>Einstellungen</h2>
		<form method="POST">
			Eigenes WiFi erzeugen:<input type="checkbox" name="WiFiAccessPointMode" value="1"/>
			<br/>
			WiFi-Name:<input type="text" name="WiFi-Name" minlength="8" maxlength="12"/>
			<br/>
			WiFi-Passwort:<input type="text" name="WiFi-Passwort" minlength="8" maxlength="12"/>
			<br/>
			Hostname/Domain:<input type="text" name="Hostname" minlength="1" maxlength="12"/>
			<br/>
			max. Anzahl an Clients:<input type="number" min="1" max="8" name="MaxConnections"/>
			<br/>
			<input type="submit" value="Abschicken"/>
		</form>
	</body>
</html>